<% micropost.record_label_micropost_comments.sort_by{ |comment| -comment.record_label_micropost_comment_votes.count }.take(100).each do |comment| %>
<div class="northrup">
  <div class="winspear">
    <%= link_to Artist.find(comment.artist_id).artist_name, artist_path(comment.artist_id) if comment.fan_id.nil? && comment.record_label_id.nil? && comment.venue_id.nil? && comment.producer_id.nil? %><%= link_to Fan.find(comment.fan_id).fan_name, fan_path(comment.fan_id) if comment.artist_id.nil? && comment.record_label_id.nil? && comment.venue_id.nil? && comment.producer_id.nil? %><%= link_to RecordLabel.find(comment.record_label_id).label_name, record_label_path(comment.record_label_id) if comment.artist_id.nil? && comment.fan_id.nil? && comment.venue_id.nil? && comment.producer_id.nil? %><%= link_to Venue.find(comment.venue_id).venue_name, venue_path(comment.venue_id) if comment.artist_id.nil? && comment.fan_id.nil? && comment.record_label_id.nil? && comment.producer_id.nil? %><%= link_to Producer.find(comment.producer_id).producer_name, producer_path(comment.producer_id) if comment.artist_id.nil? && comment.fan_id.nil? && comment.record_label_id.nil? && comment.venue_id.nil? %> <span class="posted">posted <%= time_ago_in_words(comment.created_at) %> ago</span>
    <% if RecordLabel.find(micropost.record_label_id) == current_record_label || (artist_signed_in? && current_artist.id == comment.artist_id) || (fan_signed_in? && current_fan.id == comment.fan_id) || (record_label_signed_in? && current_record_label.id == comment.record_label_id) || (venue_signed_in? && current_venue.id == comment.venue_id) || (producer_signed_in? && current_producer.id == comment.producer_id) %>
    // <%= link_to "delete comment", record_label_micropost_comment_path(RecordLabel.find(micropost.record_label_id), micropost, comment), data: { confirm: "Are you sure? This cannot be undone. Ever..." }, method: :delete, remote: true %>
    <% end %>
  </div>

  <div class="winspear">
    <%= comment.content %>
  </div>

  <div class="winspear">

    <div class="record_label_fan_comment_votes_<%= comment.id %>">
      <%= render 'recordlabels/partials/comments/fan_comment_votes', :micropost => micropost, :comment => comment %>
    </div>

    <span class="record_label_fan_comment_votes_count_<%= comment.id %>">
      <%= render 'recordlabels/partials/comments/index_comment_votes_count', :comment => comment %>
    </span>

  </div>

</div>
<% end %>
